
problem: gymnasium[box2d] is not installed
solution: python version is 3.11 now. Should be downgraded. 
        Install miniconda to use python 3.9 and install tensorflow and etc. cf. https://www.tensorflow.org/install/pip#macos
        Now gymnasium[box2d] is installed well.

problem: critic loss and actor loss increase after some episodes.
solution: 
    - found that actionToEnv is input to critic instead of action itself (from actor). 
        Note that the scaling from action to actionToEnv is not made with Tensorflow. 
        The backpropagation from Q of critic to actor should be through action instead of actionToEnv.

tip: it seems that "linear" shows better performance than "tanh" for actor's mean layer's activation in SAC.

problem: tape gradient for softmax in SAC_entropy is NaN after some episodes.
solution: found that the exp(x) for large x results in gradient explosion.
    - Use clip_by_value(x, -13, 1) for x just before exp().  # -13 and 1 is from a code. Another code uses -20 and 2.
    - activation = "softmax" cannot be used. 
        Use activation = "linear" and then clip_by_value() and then Softmax() layer. 

tip: how to print keras tensor xxx
import tensorflow.keras.backend as K
xxx = K.print_tensor(xxx, message="xxx=")



